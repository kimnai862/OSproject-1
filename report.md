姓名：張道然  學號：B06902045  系級：資工三

1.

	#### 整體程式架構：

parent process 的priority = 2

make:當process的arrive time 到時先fork並設priority=3, 並開始計時，之後將priority=1，還cpu給parent

run:每次process被執行時設priority=3，並讓parent process讓出cpu，跑所需單位時間後，將priority=1，並還cpu給parent



四種設計方法都可以利用雙指針完成，差別只在於，(1)當前輪誰run,(2)執行多少時間後要退出，而在這段時間內的其他arrival process都要進入make。

FIFO:以進入順序run，執行完全部所需時間後退出。

PSJF:以當前進入排程的最短所需時間者run

(1).令當前下一個(時間最近)尚未make的時間為x，若$x - time_{cur} < time_{need}$，則執行$x-time_{cur}$後退出，且在進入排程，重新估輪誰run

(2).否則直接執行全部所需時間，並退出

RR:以進入順序run，執行完min(500, 全部所需時間)後退出，若還有剩所需時間，則再進入排程。

SJF:以當前進入排程的最短所需時間者run，執行完全部所需時間後退出。



2.執行範例結果：

input:

```pseudocode
FIFO
10
P0 0 500
P1 1000 500
P2 2000 500
P3 3000 500
P4 4000 500
P5 5000 500
P6 6000 500
P7 7000 500
P8 8000 500
P9 9000 500
```

output:

```pseudocode
[14752.839887] [Project1] 12152 1588263758.510142131, 1588263760.375838447
[14756.582298] [Project1] 12154 1588263762.246667710, 1588263764.118329588
[14760.325392] [Project1] 12156 1588263765.988711010, 1588263767.861416563
[14764.068191] [Project1] 12159 1588263769.731997548, 1588263771.604391359
[14767.812021] [Project1] 12161 1588263773.475563923, 1588263775.348302236
[14771.554729] [Project1] 12163 1588263777.219219007, 1588263779.091092721
[14775.284461] [Project1] 12165 1588263780.952178706, 1588263782.820903734
[14779.020916] [Project1] 12167 1588263784.691548857, 1588263786.557446055
[14782.575552] [Project1] 12340 1588263788.376817505, 1588263790.112011536
[14786.309953] [Project1] 12383 1588263791.983099523, 1588263793.846620822
```

1000 units 平均跑 3.712秒

### FIFO

FIFO_1:

input:

```pseudocode
FIFO
5
P1 0 500
P2 0 500
P3 0 500
P4 0 500
P5 0 500
```

理論時間：

$500\times5/1000\times3.71=9.275$

output:

```pseudocode
[13356.811569] [Project1] 11355 1588262362.449667072, 1588262364.317182576
[13358.679573] [Project1] 11356 1588262362.450072708, 1588262366.185280904
[13360.546898] [Project1] 11357 1588262362.450474495, 1588262368.052644735
[13362.413587] [Project1] 11358 1588262362.450885332, 1588262369.919372900
[13364.283086] [Project1] 11359 1588262362.451291278, 1588262371.788922300
```

實際時間：1588262371.788922300-1588262362.449667072=9.33925533295

誤差值：((9.339/9.275) - 1)*100%=0.69%

### PSJF

PSJF_2:

input:

```pseudocode
PSJF
5
P1 0 3000
P2 1000 1000
P3 2000 4000
P4 5000 2000
P5 7000 1000
```

理論時間：

$11000/1000\times3.71=40.81$

output:

```pseudocode
[13975.806786] [Project1] 11903 1588262979.609833641, 1588262983.325963284
[13983.298623] [Project1] 11902 1588262975.871909951, 1588262990.817858463
[13994.523320] [Project1] 11908 1588262994.555686984, 1588263002.042895077
[13998.263859] [Project1] 11910 1588263002.043804870, 1588263005.783529575
[14009.474434] [Project1] 11905 1588262983.326890446, 1588263016.994339230
```

實際時間：1588263016.994339230-1588262975.871909951=41.1224293709 

誤差值：((41.122/40.81) - 1)*100%=0.77%

### RR

RR_3:

input:

```pseudocode
RR
6
P1 1200 5000
P2 2400 4000
P3 3600 3000
P4 4800 7000
P5 5200 6000
P6 5800 5000
```

理論時間：

$30000/1000\times3.71=111.3$

output:

```pseudocode
[14245.833375] [Project1] 11995 1588263198.774304680, 1588263253.358268469
[14251.431814] [Project1] 11993 1588263189.834299209, 1588263258.956979730
[14253.301291] [Project1] 11994 1588263194.301217472, 1588263260.826497238
[14283.189643] [Project1] 11998 1588263206.991344973, 1588263290.715384215
[14290.657531] [Project1] 11997 1588263204.748658809, 1588263298.183538525
[14294.398653] [Project1] 11996 1588263203.260226896, 1588263301.924757436
```

實際時間： 1588263301.924757436-1588263189.834299209=112.090458155

誤差值：((112.09/111.3) - 1)*100%=0.71%

### SJF

SJF_4:

input:

```pseudocode
SJF
5
P1 0 3000
P2 1000 1000
P3 2000 4000
P4 5000 2000
P5 7000 1000
```

理論時間：

$11000/1000\times3.71=40.81$

output:

```pseudocode
[14707.941340] [Project1] 12120 1588263704.194809640, 1588263715.476325377
[14711.662666] [Project1] 12121 1588263708.025394539, 1588263719.197762958
[14726.642445] [Project1] 12123 1588263711.751257989, 1588263734.177841570
[14730.371752] [Project1] 12128 1588263730.432995241, 1588263737.907245541
[14737.860573] [Project1] 12127 1588263722.943179962, 1588263745.396227118
```

實際時間： 1588263745.396227118-1588263704.194809640=41.2014174461

誤差值：((41.201/40.81) - 1)*100%=0.96%



### 結果與討論

誤差值全部都在1%以內

考慮到除了排程以外的其他時間誤差，這結果可說是非常何。